{"version":3,"sources":["main.js"],"names":["$","document","ready","loadScript","url","callback","script","createElement","onload","src","getElementsByTagName","appendChild","closeModal","id","modal","burger","removeClass","remove","css","show","openModal","addClass","append","getScrollBarWidth","el","style","cssText","body","width","offsetWidth","clientWidth","on","this","attr","hide","modalId","parents","menuItem","dropdownBox","find","toggleClass","slideToggle","each","select2","placeholder","dropdownPosition","minimumResultsForSearch","dropdownParent","siblings","hideSome","element","resolution","screen","maxItems","itemsToShow","items","children","length","index","moreBtnDom","hiddenItems","Swiper","slidesPerView","loop","autoHeight","navigation","prevEl","nextEl","breakpoints","992","spaceBetween","1365","hasClass","next","slideUp","slideDown","mainMap","getElementById","async","initYMap","ymaps3","YMap","YMapDefaultSchemeLayer","YMapDefaultFeaturesLayer","YMapControls","YMapZoomControl","import","YMapDefaultMarker","map","location","center","zoom","behaviors","addChild","position","coordinates","popup","content","mapIsVisible","visible","checkMapVisibility","window","removeEventListener","addEventListener","passive","e","inputValue","val","inputType","errorMessage","validateInput","input","validator","isEmpty","isEmail","renderError","errorText","removeError","preventDefault","after","setTimeout","renderContacts","cityName","jsonPath","getJSON","data","currentCity","city","name","phone","mail","sanitizedPhone","replace","text","letters","forEach","firstLetter","charAt","includes","push","sort","letter","citiesItems","reduce","result","cityItem","join"],"mappings":"aAAAA,EAAEC,UAAUC,OAAM,WAEd,SAASC,EAAWC,EAAKC,GAErB,MAAMC,EAASL,SAASM,cAAc,UACtCD,EAAOE,OAAS,WACZH,KAGJC,EAAOG,IAAML,EACbH,SAASS,qBAAqB,QAAQ,GAAGC,YAAYL,GAIzD,MAiBMM,EAAcC,IAChB,MAAMC,EAAQd,EAAG,UAASa,GACpBE,EAASf,EAAE,+BACjBc,EAAME,YAAY,UAClBhB,EAAG,aAAYa,GAAMI,SACrBjB,EAAE,QAAQgB,YAAY,gBAAgBE,IAAI,gBAAiB,GACjC,SAA1BH,EAAOG,IAAI,YAA0BH,EAAOI,QAG1CC,EAAaP,IACf,MAAMC,EAAQd,EAAG,UAASa,GAC1BC,EAAMO,SAAS,UACfP,EAAMQ,OAAQ,sCAAqCT,aACnDb,EAAE,QAAQqB,SAAS,gBAAgBH,IAAI,gBAtBjBK,MACtB,IAAIC,EAAKvB,SAASM,cAAc,OAChCiB,EAAGC,MAAMC,QAAU,sCACnBzB,SAAS0B,KAAKhB,YAAYa,GAC1B,IAAII,EAAQJ,EAAGK,YAAcL,EAAGM,YAEhC,OADAN,EAAGP,SACIW,GAgBiDL,IACxDvB,EAAG,aAAYa,GAAMkB,GAAG,SAAS,WAC7B/B,EAAEgC,MAAMf,SACRL,EAAWC,OAInBb,EAAE,kBAAkB+B,GAAG,SAAS,WAC5BX,EAAUpB,EAAEgC,MAAMC,KAAK,eACnBjC,EAAEgC,MAAMC,KAAK,kBACbjC,EAAE,+BAA+BkC,UAIzClC,EAAE,mBAAmB+B,GAAG,SAAS,WAC7B,MAAMI,EAAUnC,EAAEgC,MAAMI,QAAQ,UAAUH,KAAK,MAC/CrB,EAAWuB,MAGfnC,EAAE,mCAAmC+B,GAAG,SAAS,WAC7C,MAAMM,EAAWrC,EAAEgC,MAAMI,QAAQ,0BAC3BE,EAAcD,EAASE,KAAK,kCAClCF,EAASG,YAAY,UACrBF,EAAYE,YAAY,UACxBF,EAAYG,YAAY,QAGNzC,EAAE,qBAEV0C,MAAK,WACf1C,EAAEgC,MAAMW,QAAQ,CACZC,YAAa,aACbC,iBAAkB,QAClBC,yBAA0B,EAC1BlB,MAAO,OACPmB,eAAgB/C,EAAEgC,MAAMI,QAAQ,wBAIxCpC,EAAE,sBAAsB+B,GAAG,SAAS,WAChC/B,EAAEgC,MAAME,OACRlC,EAAEgC,MAAMgB,SAAS,uBAAuB7B,UAG5C,MAAM8B,EAAWA,CAACC,EAASC,KACvB,GAAIC,OAAOxB,MAAQuB,EAAY,OAC/B,MAAME,EAAWH,EAAQjB,KAAK,kBACxBqB,EAAcJ,EAAQjB,KAAK,sBAC3BsB,EAAQL,EAAQM,WAEtB,GADiBD,EAAME,QACPJ,EAAU,OAC1BE,EAAMb,MAAK,SAAUgB,GACbA,GAASL,GAAUrD,EAAEgC,MAAME,OAAOb,SAAS,aAGnD6B,EAAQ5B,OADc,yFAEtB,MAAMqC,EAAaT,EAAQX,KAAK,gBAChCoB,EAAW5B,GAAG,SAAS,WACnB,MAAM6B,EAAcV,EAAQM,SAAS,WACjCI,EAAYH,QAAUH,GAAaK,EAAW1C,SAClD2C,EAAYlB,MAAK,SAAUgB,GACnBA,EAAQJ,GAAatD,EAAEgC,MAAMb,OAAOH,YAAY,iBAKhEhB,EAAE,iBAAiB0C,MAAK,WACpBO,EAASjD,EAAEgC,MAAO,QAGK,IAAI6B,OAAO,0BAA2B,CAC7DC,cAAe,EACfC,MAAM,EACNC,YAAY,EACZC,WAAY,CACRC,OAAQ,uBACRC,OAAQ,wBAEZC,YAAa,CACTC,IAAK,CACDP,cAAe,EACfQ,aAAc,IAElBC,KAAM,CACFT,cAAe,EACfQ,aAAc,OAKC,IAAIT,OAAO,2BAA4B,CAC9DC,cAAe,EACfC,MAAM,EACNC,YAAY,EACZI,YAAa,CACTC,IAAK,CACDP,cAAe,EACfQ,aAAc,IAElBC,KAAM,CACFT,cAAe,EACfQ,aAAc,OAK1BtE,EAAE,wBAAwB+B,GAAG,SAAS,WAC7B/B,EAAEgC,MAAMwC,SAAS,WAIlBxE,EAAEgC,MAAMyC,KAAK,sBAAsBC,QAAQ,KAAK1D,YAAY,UAC5DhB,EAAEgC,MAAMhB,YAAY,YAJpBhB,EAAEgC,MAAMyC,KAAK,sBAAsBE,UAAU,KAAKtD,SAAS,UAC3DrB,EAAEgC,MAAMX,SAAS,cAOzB,MAAMuD,EAAU3E,SAAS4E,eAAe,WAExCC,eAAeC,UACLC,OAAO9E,MACb,MAAM+E,KACFA,EAAIC,uBACJA,EAAsBC,yBACtBA,EAAwBC,aACxBA,GACAJ,QAEEK,gBAACA,SAAyBL,OAAOM,OAAO,kCACxCC,kBAACA,SAA2BP,OAAOM,OAAO,gCAE1CE,EAAM,IAAIP,EAAKhF,SAAS4E,eAAe,WAAY,CACrDY,SAAU,CACNC,OAAQ,CAAC,UAAW,WACpBC,KAAM,IAEVC,UAAW,CAAC,YAAa,UAG7BJ,EAAIK,SAAS,IAAKX,GAClBM,EAAIK,SAAS,IAAIV,GACjBK,EAAIK,SAAS,IAAIT,EAAa,CAACU,SAAU,SAASD,SAAS,IAAIR,IAK/DG,EAAIK,SAAS,IAAIN,EAAkB,CAC/BQ,YAAa,CAAC,UAAW,WACzBC,MAAO,CACHC,QANe,oGAOfH,SAAU,YAKtB,IAAII,EAAelG,EAAE4E,GAASuB,SAAQ,GAEtC,MAAMC,EAAqBA,KACvBF,EAAelG,EAAE4E,GAASuB,SAAQ,GAC9BD,IACA/F,EAAW,wFACP4E,GACJsB,OAAOC,oBAAoB,SAAUF,KAIzCF,EACA/F,EAAW,wFACP4E,GAEJsB,OAAOE,iBAAiB,SAAUH,EAAoB,CAACI,SAAS,IAiCpExG,EAAE,iBAAiB+B,GAAG,UAAU,SAAU0E,GACvBzG,EAAEgC,MAAMO,KAAK,sBACrBG,MAAK,WACR,MAAMgE,EAAa1G,EAAEgC,MAAM2E,MACrBC,EAAY5G,EAAEgC,MAAMC,KAAK,uBACzB4E,EAnCQC,EAACC,EAAOL,EAAYE,KACtC,IAAIC,EAAe,GACnB,GAAIG,UAAUC,QAAQP,GAElB,OADAG,EAAe,uBACRA,EAEX,OAAQD,GACJ,IAAK,QACII,UAAUE,QAAQR,KAAaG,EAAe,uBAK3D,OAAOA,GAsBkBC,CAAc9G,EAAEgC,MAAO0E,EAAYE,GAnB5CO,IAACjE,EAASkE,EAqBjBJ,UAAUC,QAAQJ,GAZV3D,CAAAA,IACjBA,EAAQlC,YAAY,aACpBkC,EAAQuB,KAAK,qBAAqBxD,UAc1BoG,CAAYrH,EAAEgC,QAHdyE,EAAEa,iBAtBOpE,EAuBGlD,EAAEgC,MAvBIoF,EAuBGP,EAtB7B3D,EAAQ7B,SAAS,aACjB6B,EAAQuB,KAAK,qBAAqBxD,SAClCiC,EAAQqE,MAAO,iCAAgCH,WAC/CI,YAAW,WACPtE,EAAQuB,KAAK,qBAAqBxD,WACnC,YAwBP,MAAMwG,EAAiBA,CAACC,EAAUC,KAC9B3H,EAAE4H,QAAQD,GAAU,SAASE,GACzB,MAAMC,EAAcD,EAAKtF,KAAKwF,GAAQA,EAAKC,OAASN,IAC7CO,EAAOC,GAAQ,CAACJ,EAAYG,MAAOH,EAAYI,MAChDC,EAAiBF,EAAMG,QAAQ,MAAO,IAC5CpI,EAAE,sBAAsBqI,KAAKJ,GAAOhG,KAAK,OAAS,OAAMkG,GAAkBnH,YAAY,eACtFhB,EAAE,qBAAqBqI,KAAKH,GAAMjG,KAAK,OAAS,UAASiG,GAAQlH,YAAY,mBAQrF,GAJIhB,EAAE,gBAAgByD,OAAS,GAC3BgE,EAAe,cAAe,wBAG9BzH,EAAE,mBAAmByD,OAAS,EAAG,CACjC,MAAM6E,EAAU,GAChBtI,EAAE4H,QAAQ,wBAAwB,SAASC,GACvCA,EAAKU,QAAQR,IACT,MAAMS,EAAcT,EAAKC,KAAKS,OAAO,GAChCH,EAAQI,SAASF,IAAcF,EAAQK,KAAKH,KAGrDF,EAAQM,OAERN,EAAQC,QAAQM,IACZ,MAAMC,EAAcjB,EAAKkB,OAAO,CAACC,EAAQjB,KACjCA,EAAKC,KAAKS,OAAO,KAAOI,GACxBG,EAAOL,KAAM,8DAA6DZ,EAAKC,cAE5EgB,GACR,IAEGC,EAAY,wHAE8BJ,gCAC1CC,EAAYI,KAAK,8BAGvBlJ,EAAE,mBAAmBsB,OAAO2H,QAIpCjJ,EAAEC,UAAU8B,GAAG,QAAS,uBAAuB,WAC3C0F,EAAezH,EAAEgC,MAAMqG,OAAQ","file":"main.min.js","sourcesContent":["$(document).ready(function () {\r\n\r\n    function loadScript(url, callback) {\r\n\r\n        const script = document.createElement(\"script\");\r\n        script.onload = function () {\r\n            callback();\r\n        };\r\n\r\n        script.src = url;\r\n        document.getElementsByTagName(\"head\")[0].appendChild(script);\r\n    }\r\n\r\n    //Задержка действия на событие\r\n    const debounce = function (func, time) {\r\n        let timer\r\n        return function (event) {\r\n            if (timer) clearTimeout(timer)\r\n            timer = setTimeout(func, time, event)\r\n        }\r\n    }\r\n\r\n    const getScrollBarWidth = () => {\r\n        let el = document.createElement(\"div\");\r\n        el.style.cssText = \"overflow:scroll; position:absolute;\";\r\n        document.body.appendChild(el);\r\n        let width = el.offsetWidth - el.clientWidth;\r\n        el.remove();\r\n        return width;\r\n    }\r\n\r\n    const closeModal = (id) => {\r\n        const modal = $(`.modal#${id}`)\r\n        const burger = $('.header__mobile-menu-toggle')\r\n        modal.removeClass('opened')\r\n        $(`#modalBg--${id}`).remove()\r\n        $('body').removeClass('modal-opened').css('padding-right', 0)\r\n        burger.css('display') === 'none' &&  burger.show()\r\n    }\r\n\r\n    const openModal = (id) => {\r\n        const modal = $(`.modal#${id}`)\r\n        modal.addClass('opened')\r\n        modal.append(`<div class=\"modal-bg\" id=\"modalBg--${id}\"></div>`)\r\n        $('body').addClass('modal-opened').css('padding-right', getScrollBarWidth())\r\n        $(`#modalBg--${id}`).on('click', function () {\r\n            $(this).remove()\r\n            closeModal(id)\r\n        })\r\n    }\r\n\r\n    $('.js-open-modal').on('click', function () {\r\n        openModal($(this).attr('data-modal'))\r\n        if ($(this).attr('data-mob-menu')) {\r\n            $('.header__mobile-menu-toggle').hide()\r\n        }\r\n    })\r\n\r\n    $('.js-close-modal').on('click', function () {\r\n        const modalId = $(this).parents('.modal').attr('id')\r\n        closeModal(modalId)\r\n    })\r\n\r\n    $('.js-toggle-mobile-menu-dropdown').on('click', function () {\r\n        const menuItem = $(this).parents('.mobile-menu-nav__item')\r\n        const dropdownBox = menuItem.find('.mobile-menu-nav__dropdown-box')\r\n        menuItem.toggleClass('opened')\r\n        dropdownBox.toggleClass('opened')\r\n        dropdownBox.slideToggle(200)\r\n    })\r\n\r\n    const searchSelects = $(\".js-search-select\")\r\n\r\n    searchSelects.each(function () {\r\n        $(this).select2({\r\n            placeholder: 'Тип работы',\r\n            dropdownPosition: 'below',\r\n            minimumResultsForSearch: -1,\r\n            width: '100%',\r\n            dropdownParent: $(this).parents('.select-wrapper')\r\n        })\r\n    })\r\n\r\n    $('.js-show-promocode').on('click', function () {\r\n        $(this).hide()\r\n        $(this).siblings('.js-promocode-input').show()\r\n    })\r\n\r\n    const hideSome = (element, resolution) => {\r\n        if (screen.width > resolution) return\r\n        const maxItems = element.attr('data-max-items')\r\n        const itemsToShow = element.attr('data-items-to-show')\r\n        const items = element.children()\r\n        const itemsQty = items.length\r\n        if (itemsQty <= maxItems) return\r\n        items.each(function (index) {\r\n            if (index >= maxItems) $(this).hide().addClass('hidden')\r\n        })\r\n        const moreBtnMarkup = '<button class=\"more-button js-more-btn common-btn common-btn--purple\">Ещё...</button>'\r\n        element.append(moreBtnMarkup)\r\n        const moreBtnDom = element.find('.js-more-btn')\r\n        moreBtnDom.on('click', function () {\r\n            const hiddenItems = element.children('.hidden')\r\n            if (hiddenItems.length <= itemsToShow) moreBtnDom.remove()\r\n            hiddenItems.each(function (index) {\r\n                if (index < itemsToShow) $(this).show().removeClass('hidden')\r\n            })\r\n        })\r\n    }\r\n\r\n    $('.js-hide-some').each(function () {\r\n        hideSome($(this), 991)\r\n    })\r\n\r\n    const testimonialsSlider = new Swiper('.js-testimonials-slider', {\r\n        slidesPerView: 1,\r\n        loop: true,\r\n        autoHeight: true,\r\n        navigation: {\r\n            prevEl: '.swiper-button--prev',\r\n            nextEl: '.swiper-button--next',\r\n        },\r\n        breakpoints: {\r\n            992: {\r\n                slidesPerView: 2,\r\n                spaceBetween: 20,\r\n            },\r\n            1365: {\r\n                slidesPerView: 3,\r\n                spaceBetween: 20,\r\n            },\r\n        }\r\n    });\r\n\r\n    const workExamplesSlider = new Swiper('.js-work-examples-slider', {\r\n        slidesPerView: 1,\r\n        loop: true,\r\n        autoHeight: true,\r\n        breakpoints: {\r\n            992: {\r\n                slidesPerView: 2,\r\n                spaceBetween: 20,\r\n            },\r\n            1365: {\r\n                slidesPerView: 3,\r\n                spaceBetween: 20,\r\n            },\r\n        }\r\n    });\r\n\r\n    $('.js-accordion-toggle').on('click', function () {\r\n        if (!$(this).hasClass('opened')) {\r\n            $(this).next('.js-accordion-head').slideDown(300).addClass('opened')\r\n            $(this).addClass('opened')\r\n        } else {\r\n            $(this).next('.js-accordion-head').slideUp(300).removeClass('opened')\r\n            $(this).removeClass('opened')\r\n        }\r\n    })\r\n\r\n    const mainMap = document.getElementById('mainMap')\r\n\r\n    async function initYMap() {\r\n        await ymaps3.ready;\r\n        const {\r\n            YMap,\r\n            YMapDefaultSchemeLayer,\r\n            YMapDefaultFeaturesLayer,\r\n            YMapControls,\r\n        } = ymaps3;\r\n\r\n        const {YMapZoomControl} = await ymaps3.import('@yandex/ymaps3-controls@0.0.1');\r\n        const {YMapDefaultMarker} = await ymaps3.import('@yandex/ymaps3-markers@0.0.1');\r\n\r\n        const map = new YMap(document.getElementById('mainMap'), {\r\n            location: {\r\n                center: [37.591701, 55.749385],\r\n                zoom: 16\r\n            },\r\n            behaviors: ['pinchZoom', 'drag']\r\n        });\r\n\r\n        map.addChild(new  YMapDefaultSchemeLayer());\r\n        map.addChild(new YMapDefaultFeaturesLayer());\r\n        map.addChild(new YMapControls({position: 'left'}).addChild(new YMapZoomControl()));\r\n\r\n        const markerContent = `<div><strong>Офис Work5</strong><div>\r\n                               <div>офис 468, этаж 4</div>`\r\n\r\n        map.addChild(new YMapDefaultMarker({\r\n            coordinates: [37.591701, 55.749385],\r\n            popup: {\r\n                content: markerContent,\r\n                position: 'right'\r\n            }\r\n        }));\r\n    }\r\n\r\n    let mapIsVisible = $(mainMap).visible(true)\r\n\r\n    const checkMapVisibility = () => {\r\n        mapIsVisible = $(mainMap).visible(true)\r\n        if (mapIsVisible) {\r\n            loadScript('https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU',\r\n                initYMap)\r\n            window.removeEventListener('scroll', checkMapVisibility)\r\n        }\r\n    }\r\n\r\n    if (mapIsVisible) {\r\n        loadScript('https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU',\r\n            initYMap)\r\n    } else {\r\n        window.addEventListener('scroll', checkMapVisibility, {passive: true});\r\n    }\r\n\r\n    const validateInput = (input, inputValue, inputType) => {\r\n        let errorMessage = ''\r\n        if (validator.isEmpty(inputValue)) {\r\n            errorMessage = \"Необходимо заполнить\"\r\n            return errorMessage\r\n        }\r\n        switch (inputType) {\r\n            case 'email':\r\n                if (!validator.isEmail(inputValue)) errorMessage = 'Не похоже на e-mail'\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        return errorMessage\r\n    }\r\n\r\n    const renderError = (element, errorText) => {\r\n        element.addClass('has-error')\r\n        element.next('.validation-error').remove()\r\n        element.after(`<div class=\"validation-error\">${errorText}</div>`)\r\n        setTimeout(function () {\r\n            element.next('.validation-error').remove()\r\n        }, 5000)\r\n    }\r\n\r\n    const removeError = (element) => {\r\n        element.removeClass('has-error')\r\n        element.next('.validation-error').remove()\r\n    }\r\n\r\n    $('.js-validator').on('submit', function (e) {\r\n        const inputs = $(this).find('.js-input-required')\r\n        inputs.each(function () {\r\n            const inputValue = $(this).val()\r\n            const inputType = $(this).attr('data-validator-type')\r\n            const errorMessage = validateInput($(this), inputValue, inputType)\r\n\r\n            if (!validator.isEmpty(errorMessage)) {\r\n                e.preventDefault()\r\n                renderError($(this), errorMessage)\r\n            } else {\r\n                removeError($(this))\r\n            }\r\n        })\r\n    })\r\n\r\n    const renderContacts = (cityName, jsonPath) => {\r\n        $.getJSON(jsonPath, function(data) {\r\n            const currentCity = data.find(city => city.name === cityName)\r\n            const [phone, mail] = [currentCity.phone, currentCity.mail]\r\n            const sanitizedPhone = phone.replace(/\\W/g, '')\r\n            $('.js-contacts-phone').text(phone).attr('href', `tel:${sanitizedPhone}`).removeClass('placeholder')\r\n            $('.js-contacts-mail').text(mail).attr('href', `mailto:${mail}`).removeClass('placeholder')\r\n        })\r\n    }\r\n\r\n    if ($('.contacts-pg').length > 0) {\r\n        renderContacts('Владивосток', './data/contacts.json')\r\n    }\r\n\r\n    if ($('.js-cities-list').length > 0) {\r\n        const letters = []\r\n        $.getJSON('./data/contacts.json', function(data) {\r\n            data.forEach(city => {\r\n                const firstLetter = city.name.charAt(0)\r\n                if (!letters.includes(firstLetter)) letters.push(firstLetter)\r\n            })\r\n\r\n            letters.sort()\r\n\r\n            letters.forEach(letter => {\r\n                const citiesItems = data.reduce((result, city) => {\r\n                    if (city.name.charAt(0) === letter) {\r\n                        result.push(`<div class=\"contacts-cities__item-city js-render-contacts\">${city.name}</div>`)\r\n                    }\r\n                    return result\r\n                }, [])\r\n\r\n                const cityItem = `\r\n                <div class=\"contacts-cities__item\">\r\n                    <div class=\"contacts-cities__item-letter\">${letter}</div>\r\n                    ${citiesItems.join(\"\")}\r\n                </div>`\r\n\r\n                $('.js-cities-list').append(cityItem)\r\n            })\r\n        })\r\n\r\n        $(document).on('click', '.js-render-contacts', function () {\r\n            renderContacts($(this).text(), './data/contacts.json')\r\n        })\r\n    }\r\n\r\n});\r\n\r\n\r\n"]}