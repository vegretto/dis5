"use strict";$(document).ready((function(){function e(e,t){const o=document.createElement("script");o.onload=function(){t()},o.src=e,document.getElementsByTagName("head")[0].appendChild(o)}const t=e=>{const t=$(".modal#"+e),o=$(".header__mobile-menu-toggle");t.removeClass("opened"),$("#modalBg--"+e).remove(),$("body").removeClass("modal-opened").css("padding-right",0),"none"===o.css("display")&&o.show()},o=e=>{const o=$(".modal#"+e);o.addClass("opened"),o.append(`<div class="modal-bg" id="modalBg--${e}"></div>`),$("body").addClass("modal-opened").css("padding-right",(()=>{let e=document.createElement("div");e.style.cssText="overflow:scroll; position:absolute;",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t})()),$("#modalBg--"+e).on("click",(function(){$(this).remove(),t(e)}))};$(".js-open-modal").on("click",(function(){o($(this).attr("data-modal")),$(this).attr("data-mob-menu")&&$(".header__mobile-menu-toggle").hide()})),$(".js-close-modal").on("click",(function(){const e=$(this).parents(".modal").attr("id");t(e)})),$(".js-toggle-mobile-menu-dropdown").on("click",(function(){const e=$(this).parents(".mobile-menu-nav__item"),t=e.find(".mobile-menu-nav__dropdown-box");e.toggleClass("opened"),t.toggleClass("opened"),t.slideToggle(200)}));$(".js-search-select").each((function(){$(this).select2({placeholder:"Тип работы",dropdownPosition:"below",minimumResultsForSearch:-1,width:"100%",dropdownParent:$(this).parents(".select-wrapper")})})),$(".js-show-promocode").on("click",(function(){$(this).hide(),$(this).siblings(".js-promocode-input").show()}));const n=(e,t)=>{if(screen.width>t)return;const o=e.attr("data-max-items"),n=e.attr("data-items-to-show"),s=e.children();if(s.length<=o)return;s.each((function(e){e>=o&&$(this).hide().addClass("hidden")}));e.append('<button class="more-button js-more-btn common-btn common-btn--purple">Ещё...</button>');const i=e.find(".js-more-btn");i.on("click",(function(){const t=e.children(".hidden");t.length<=n&&i.remove(),t.each((function(e){e<n&&$(this).show().removeClass("hidden")}))}))};$(".js-hide-some").each((function(){n($(this),991)}));new Swiper(".js-testimonials-slider",{slidesPerView:1,loop:!0,autoHeight:!0,navigation:{prevEl:".swiper-button--prev",nextEl:".swiper-button--next"},breakpoints:{992:{slidesPerView:2,spaceBetween:20},1365:{slidesPerView:3,spaceBetween:20}}}),new Swiper(".js-work-examples-slider",{slidesPerView:1,loop:!0,autoHeight:!0,breakpoints:{992:{slidesPerView:2,spaceBetween:20},1365:{slidesPerView:3,spaceBetween:20}}});$(".js-accordion-toggle").on("click",(function(){$(this).hasClass("opened")?($(this).next(".js-accordion-head").slideUp(300).removeClass("opened"),$(this).removeClass("opened")):($(this).next(".js-accordion-head").slideDown(300).addClass("opened"),$(this).addClass("opened"))}));const s=document.getElementById("mainMap");async function i(){await ymaps3.ready;const{YMap:e,YMapDefaultSchemeLayer:t,YMapDefaultFeaturesLayer:o,YMapControls:n}=ymaps3,{YMapZoomControl:s}=await ymaps3.import("@yandex/ymaps3-controls@0.0.1"),{YMapDefaultMarker:i}=await ymaps3.import("@yandex/ymaps3-markers@0.0.1"),a=new e(document.getElementById("mainMap"),{location:{center:[37.591701,55.749385],zoom:16},behaviors:["pinchZoom","drag"]});a.addChild(new t),a.addChild(new o),a.addChild(new n({position:"left"}).addChild(new s));a.addChild(new i({coordinates:[37.591701,55.749385],popup:{content:"<div><strong>Офис Work5</strong><div>\n                               <div>офис 468, этаж 4</div>",position:"right"}}))}let a=$(s).visible(!0);const d=()=>{a=$(s).visible(!0),a&&(e("https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU",i),window.removeEventListener("scroll",d))};a?e("https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU",i):window.addEventListener("scroll",d,{passive:!0});$(".js-validator").on("submit",(function(e){$(this).find(".js-input-required").each((function(){const t=$(this).val(),o=$(this).attr("data-validator-type"),n=((e,t,o)=>{let n="";if(validator.isEmpty(t))return n="Необходимо заполнить",n;switch(o){case"email":validator.isEmail(t)||(n="Не похоже на e-mail")}return n})($(this),t,o);var s,i;validator.isEmpty(n)?(e=>{e.removeClass("has-error"),e.next(".validation-error").remove()})($(this)):(e.preventDefault(),s=$(this),i=n,s.addClass("has-error"),s.next(".validation-error").remove(),s.after(`<div class="validation-error">${i}</div>`),setTimeout((function(){s.next(".validation-error").remove()}),5e3))}))}));const c=(e,t)=>{$.getJSON(t,(function(t){const o=t.find(t=>t.name===e),[n,s]=[o.phone,o.mail],i=n.replace(/\W/g,"");$(".js-contacts-phone").text(n).attr("href","tel:"+i).removeClass("placeholder"),$(".js-contacts-mail").text(s).attr("href","mailto:"+s).removeClass("placeholder")}))};if($(".contacts-pg").length>0&&c("Владивосток","./data/contacts.json"),$(".js-cities-list").length>0){const e=[];$.getJSON("./data/contacts.json",(function(t){t.forEach(t=>{const o=t.name.charAt(0);e.includes(o)||e.push(o)}),e.sort(),e.forEach(e=>{const o=t.reduce((t,o)=>(o.name.charAt(0)===e&&t.push(`<div class="contacts-cities__item-city js-render-contacts">${o.name}</div>`),t),[]),n=`\n                <div class="contacts-cities__item">\n                    <div class="contacts-cities__item-letter">${e}</div>\n                    ${o.join("")}\n                </div>`;$(".js-cities-list").append(n)})})),$(document).on("click",".js-render-contacts",(function(){c($(this).text(),"./data/contacts.json")}))}}));
//# sourceMappingURL=main.min.js.map
